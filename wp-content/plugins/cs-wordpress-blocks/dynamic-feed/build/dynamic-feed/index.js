(()=>{"use strict";var e,s={260(e,s,r){const o=window.wp.blocks,t=window.wp.blockEditor,l=window.wp.i18n,i=window.wp.components,n=window.wp.data,c=window.ReactJSXRuntime,d=[{label:(0,l.__)("Posts","cs-wordpress-blocks"),value:"post"},{label:(0,l.__)("Pages","cs-wordpress-blocks"),value:"page"}];function a({attributes:e,setAttributes:s}){const{postType:r,taxonomy:o}=e,{terms:t,isResolving:a}=(0,n.useSelect)(e=>{const s=e("core"),r={per_page:100,hide_empty:!1};return{terms:s.getEntityRecords("taxonomy",o,r),isResolving:s.isResolving("getEntityRecords",["taxonomy",o,r])}},[o]);return(0,c.jsxs)(i.PanelBody,{title:(0,l.__)("Source","cs-wordpress-blocks"),initialOpen:!0,children:[(0,c.jsx)(i.SelectControl,{label:(0,l.__)("Post type","cs-wordpress-blocks"),value:r,options:d,onChange:e=>s({postType:e})}),(0,c.jsx)(i.SelectControl,{label:(0,l.__)("Taxonomy","cs-wordpress-blocks"),value:o,options:[{label:(0,l.__)("Category","cs-wordpress-blocks"),value:"category"},{label:(0,l.__)("Tag","cs-wordpress-blocks"),value:"post_tag"}],onChange:e=>s({taxonomy:e,termIds:[]})}),(0,c.jsxs)("div",{style:{marginTop:12},children:[(0,c.jsx)("strong",{children:(0,l.__)("Filter terms","cs-wordpress-blocks")}),a&&(0,c.jsx)("div",{style:{marginTop:8},children:(0,c.jsx)(i.Spinner,{})}),!a&&Array.isArray(t)&&0===t.length&&(0,c.jsx)(i.Notice,{status:"warning",isDismissible:!1,children:(0,l.__)("No terms found for this taxonomy.","cs-wordpress-blocks")}),!a&&Array.isArray(t)&&t.length>0&&(0,c.jsx)("div",{style:{maxHeight:180,overflow:"auto",marginTop:8},children:t.map(r=>{const o=!!Array.isArray(e.termIds)&&e.termIds.includes(r.id);return(0,c.jsx)(i.CheckboxControl,{label:r.name,checked:o,onChange:o=>{const t=Array.isArray(e.termIds)?e.termIds:[],l=o?Array.from(new Set([...t,r.id])):t.filter(e=>e!==r.id);s({termIds:l})}},r.id)})}),(0,c.jsx)(i.Notice,{status:"info",isDismissible:!1,children:(0,l.__)("If no terms are selected, the feed shows the latest items.","cs-wordpress-blocks")})]})]})}const p=[{label:(0,l.__)("Date","cs-wordpress-blocks"),value:"date"},{label:(0,l.__)("Title","cs-wordpress-blocks"),value:"title"},{label:(0,l.__)("Modified","cs-wordpress-blocks"),value:"modified"},{label:(0,l.__)("Comment count","cs-wordpress-blocks"),value:"comment_count"}],h=[{label:(0,l.__)("Descending","cs-wordpress-blocks"),value:"desc"},{label:(0,l.__)("Ascending","cs-wordpress-blocks"),value:"asc"}];function w({attributes:e,setAttributes:s}){const{orderBy:r,order:o,limit:t}=e;return(0,c.jsxs)(i.PanelBody,{title:(0,l.__)("Sorting & limit","cs-wordpress-blocks"),initialOpen:!1,children:[(0,c.jsx)(i.SelectControl,{label:(0,l.__)("Order by","cs-wordpress-blocks"),value:r,options:p,onChange:e=>s({orderBy:e})}),(0,c.jsx)(i.SelectControl,{label:(0,l.__)("Order","cs-wordpress-blocks"),value:o,options:h,onChange:e=>s({order:e})}),(0,c.jsx)(i.RangeControl,{label:(0,l.__)("Items to show","cs-wordpress-blocks"),value:t,min:1,max:20,onChange:e=>s({limit:e})})]})}function b({attributes:e,setAttributes:s}){const{showImage:r,showExcerpt:o,excerptLength:t,showMeta:n}=e;return(0,c.jsxs)(i.PanelBody,{title:(0,l.__)("Display","cs-wordpress-blocks"),initialOpen:!1,children:[(0,c.jsx)(i.ToggleControl,{label:(0,l.__)("Show featured image","cs-wordpress-blocks"),checked:!!r,onChange:e=>s({showImage:!!e})}),(0,c.jsx)(i.ToggleControl,{label:(0,l.__)("Show excerpt","cs-wordpress-blocks"),checked:!!o,onChange:e=>s({showExcerpt:!!e})}),o&&(0,c.jsx)(i.RangeControl,{label:(0,l.__)("Excerpt length (words)","cs-wordpress-blocks"),value:t,min:5,max:80,onChange:e=>s({excerptLength:e})}),(0,c.jsx)(i.ToggleControl,{label:(0,l.__)("Show meta (date/author)","cs-wordpress-blocks"),checked:!!n,onChange:e=>s({showMeta:!!e})})]})}const u=window.wp.element,m=window.wp.serverSideRender;var _=r.n(m);function x({attributes:e}){const{postType:s,taxonomy:r,termIds:o,orderBy:n,order:d,limit:a,viewStyle:p,refreshKey:h}=e,w=(0,t.useBlockProps)({className:`cs-dynamic-feed cs-dynamic-feed--${p||"list"}`}),[b,m]=(0,u.useState)(!1);return Array.isArray(e.termIds)&&e.termIds.length>0?(0,c.jsxs)("div",{...w,children:[(0,c.jsx)("strong",{children:(0,l.__)("Dynamic Feed","cs-wordpress-blocks")}),(0,c.jsx)(i.ToggleControl,{checked:b,label:b?" Hide Block Settings":" Show Block Settings",onChange:()=>{m(!b)}}),b&&(0,c.jsxs)("div",{style:{marginTop:8,opacity:.85},children:[(0,c.jsxs)("div",{children:[(0,l.__)("Post type:","cs-wordpress-blocks")," ",(0,c.jsx)("code",{children:s})]}),(0,c.jsxs)("div",{children:[(0,l.__)("Taxonomy:","cs-wordpress-blocks")," ",(0,c.jsx)("code",{children:r})]}),(0,c.jsxs)("div",{children:[(0,l.__)("Terms:","cs-wordpress-blocks")," ",(0,c.jsx)("code",{children:o?.length?o.join(", "):(0,l.__)("none","cs-wordpress-blocks")})]}),(0,c.jsxs)("div",{children:[(0,l.__)("Order:","cs-wordpress-blocks")," ",(0,c.jsxs)("code",{children:[n," ",d]})]}),(0,c.jsxs)("div",{children:[(0,l.__)("Limit:","cs-wordpress-blocks")," ",(0,c.jsx)("code",{children:a})]}),(0,c.jsxs)("div",{children:[(0,l.__)("View:","cs-wordpress-blocks")," ",(0,c.jsx)("code",{children:p})]})]}),(0,c.jsx)("div",{style:{marginTop:12},children:(0,c.jsx)(_(),{block:"cs/dynamic-feed",attributes:{...e,refreshKey:h||0}})})]}):(0,c.jsx)(i.Placeholder,{label:"Dynamic Feed",children:"Select one or more terms in the sidebar to preview posts."})}const v={postType:"post",taxonomy:"category",termIds:[],orderBy:"date",order:"desc",limit:6,showImage:!0,showExcerpt:!0,excerptLength:24,showMeta:!0,viewStyle:"list",refreshKey:0},g=window.wp.primitives;var y=(0,c.jsx)(g.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(g.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})}),k=(0,c.jsx)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(g.Path,{d:"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z",fillRule:"evenodd",clipRule:"evenodd"})});function j({attributes:e,setAttributes:s}){const{viewStyle:r,refreshKey:o}=e;return(0,c.jsxs)(t.BlockControls,{children:[(0,c.jsxs)(i.ToolbarGroup,{label:(0,l.__)("View","cs-wordpress-blocks"),children:[(0,c.jsx)(i.ToolbarButton,{icon:y,label:(0,l.__)("List view","cs-wordpress-blocks"),isPressed:"list"===r,onClick:()=>s({viewStyle:"list"})}),(0,c.jsx)(i.ToolbarButton,{icon:k,label:(0,l.__)("Card view","cs-wordpress-blocks"),isPressed:"cards"===r,onClick:()=>s({viewStyle:"cards"})})]}),(0,c.jsx)(i.ToolbarGroup,{children:(0,c.jsx)(i.ToolbarDropdownMenu,{icon:"ellipsis",label:(0,l.__)("Dynamic Feed actions","cs-wordpress-blocks"),controls:[{title:(0,l.__)("Refresh preview","cs-wordpress-blocks"),icon:"update",onClick:()=>{s({refreshKey:(o||0)+1})}},{title:(0,l.__)("Reset to defaults","cs-wordpress-blocks"),icon:"undo",onClick:()=>{window.confirm((0,l.__)("Reset Dynamic Feed settings to defaults?","cs-wordpress-blocks"))&&s({...v,refreshKey:(o||0)+1})}}]})})]})}const f=JSON.parse('{"UU":"cs/dynamic-feed"}');(0,o.registerBlockType)(f.UU,{edit:function({attributes:e,setAttributes:s}){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(j,{attributes:e,setAttributes:s}),(0,c.jsxs)(t.InspectorControls,{children:[(0,c.jsx)(a,{attributes:e,setAttributes:s}),(0,c.jsx)(w,{attributes:e,setAttributes:s}),(0,c.jsx)(b,{attributes:e,setAttributes:s})]}),(0,c.jsx)(x,{attributes:e})]})}})}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var l=r[e]={exports:{}};return s[e](l,l.exports,o),l.exports}o.m=s,e=[],o.O=(s,r,t,l)=>{if(!r){var i=1/0;for(a=0;a<e.length;a++){for(var[r,t,l]=e[a],n=!0,c=0;c<r.length;c++)(!1&l||i>=l)&&Object.keys(o.O).every(e=>o.O[e](r[c]))?r.splice(c--,1):(n=!1,l<i&&(i=l));if(n){e.splice(a--,1);var d=t();void 0!==d&&(s=d)}}return s}l=l||0;for(var a=e.length;a>0&&e[a-1][2]>l;a--)e[a]=e[a-1];e[a]=[r,t,l]},o.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return o.d(s,{a:s}),s},o.d=(e,s)=>{for(var r in s)o.o(s,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={242:0,974:0};o.O.j=s=>0===e[s];var s=(s,r)=>{var t,l,[i,n,c]=r,d=0;if(i.some(s=>0!==e[s])){for(t in n)o.o(n,t)&&(o.m[t]=n[t]);if(c)var a=c(o)}for(s&&s(r);d<i.length;d++)l=i[d],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(a)},r=globalThis.webpackChunkdynamic_feed=globalThis.webpackChunkdynamic_feed||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))})();var t=o.O(void 0,[974],()=>o(260));t=o.O(t)})();